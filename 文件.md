# 文件

## tar

```shell
# 压缩文件
tar -czvf filename.tar.gz directory

# gz 多线程 pigz
tar -I pigz -cvf filename.tar.gz directory
# 使用不同的压缩算法
# zstd zstd -`级别，最高19` -T`线程数量，0代表全部可用`
tar -I '压缩设置' -cvf filename.tar.zst directory

# 解压文件
tar -xzvf filename.tar.gz
# 解压到指定目录
tar -xzvf filename.tar.gz -C /path/to/dir

# 查看压缩包
tar -tf filename.tar.gz
```

## find

```bash
# 文件夹内前十个最大的文件
find /path/to/dir -type f -exec du -h {} + | sort -rh | head -n 10

```

## rsync

### 同步文件夹

```shell
```

#### 多线程复制文件

```sh
# 多线程复制文件
threads=10
# 必须使用绝对路径
src=/mnt/data/clickhouse/server/secondary/
dest=/mnt-new/data/clickhouse/server/secondary/
mkdir -p $dest
rsync -av -f"+ */" -f"- *" $src $dest && (cd $src && find . -type f | xargs -n1 -P$threads -I% rsync -av % $dest/%)

```
